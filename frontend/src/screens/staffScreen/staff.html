<!-- START OF FILE: frontend/src/screens/staffScreen/staff.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard - ImmaCare+</title>
    
    <!-- Link to Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- This now points to the new, dedicated stylesheet for the staff panel -->
    <link rel="stylesheet" href="/src/styles/staffScreenStyles.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/style.css">
</head>

<body>
    <div class="container" id="staff-dashboard-container">
        <nav class="sidebar">
            <div class="logo">
                <h2>ImmaCare</h2>
                <p>Staff Panel</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-target="dashboard"><a href="#"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li class="nav-item" data-target="patients"><a href="#"><i class="fas fa-procedures"></i> Patient Records</a></li>
                <li class="nav-item" data-target="financials"><a href="#"><i class="fas fa-file-invoice-dollar"></i> Financials</a></li>
                <li class="nav-item" data-target="profile"><a href="#"><i class="fas fa-user-edit"></i> My Profile</a></li>
                <!-- Add more staff-specific links here in the future -->
            </ul>
            <div class="user-info">
                <div class="avatar"><i class="fas fa-user-nurse"></i></div>
                <div class="details">
                    <h4 id="staff-user-fullname">Staff Member</h4>
                    <a href="/logout" id="logout-button"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </nav>

        <main class="main-content">
            <header class="top-bar">
                <!-- Header content can be added later -->
            </header>

            <section class="content-section dashboard-section active" id="dashboard">
                <h1>Staff Dashboard</h1>
                <p>Welcome! This is where staff-specific features will be.</p>
                <p>The first feature to build will be the Patient Records section.</p>
            </section>

            <section class="content-section" id="patients" style="display: none;">
                <div class="section-header">
                    <h1>Patient Records</h1>
                    <!-- <button class="add-new-btn" id="add-new-patient-btn"><i class="fas fa-plus"></i> Add New Patient</button> -->
                </div>
                <div class="filters">
                    <input type="text" id="patients-search" placeholder="Search by patient name or email...">
                    <button id="patients-search-btn" class="filter-button">Search</button>
                </div>
                <div class="data-table">
                    <table id="patients-table">
                         <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Last Visit</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Patient data will be loaded here by staff.js -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination-controls" id="patients-pagination"></div>
            </section>

            <section class="content-section" id="financials" style="display: none;">
                <div class="section-header">
                    <h1>Financial Records</h1>
                    <button class="add-new-btn" id="add-financial-record-btn"><i class="fas fa-plus"></i> Add Expense</button>
                </div>
                <div class="filters">
                    <input type="text" id="financials-month-filter" placeholder="Select Month and Year...">
                    <button id="generate-report-btn" class="secondary-btn"><i class="fas fa-download"></i> Generate Report</button>
                </div>
                <div class="data-table">
                    <table id="financials-table">
                         <thead>
                            <tr>
                                <th>Purchase Date</th>
                                <th>Item Name</th>
                                <th>Quantity</th>
                                <th>Price (Each)</th>
                                <th>Total Price</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="pagination-controls" id="financials-pagination"></div>
            </section>

             <section class="content-section" id="profile" style="display: none;">
                 <div class="section-header">
                    <h1>Manage My Profile</h1>
                </div>
                <!-- START: Replace the old .profile-container with this new, structured one -->
                <div class="profile-container">
                    <form id="staff-profile-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="staff-profile-firstName">First Name</label>
                                <div class="input-with-button">
                                    <input type="text" id="staff-profile-firstName" name="firstName" required>
                                    <button type="button" class="edit-btn" data-target="staff-profile-firstName">Change</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="staff-profile-lastName">Last Name</label>
                                <div class="input-with-button">
                                    <input type="text" id="staff-profile-lastName" name="lastName" required>
                                    <button type="button" class="edit-btn" data-target="staff-profile-lastName">Change</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                             <label for="staff-profile-suffix">Suffix</label>
                             <div class="input-with-button">
                                <input type="text" id="staff-profile-suffix" name="suffix">
                                <button type="button" class="edit-btn" data-target="staff-profile-suffix">Change</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="staff-profile-age">Age</label>
                            <div class="input-with-button">
                                <input type="number" id="staff-profile-age" name="age" required>
                                <button type="button" class="edit-btn" data-target="staff-profile-age">Change</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="staff-profile-phone">Phone Number</label>
                            <div class="input-with-button">
                                <input type="tel" id="staff-profile-phone" name="phone" required>
                                <button type="button" class="edit-btn" data-target="staff-profile-phone">Change</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="staff-profile-address">Address</label>
                            <div class="input-with-button">
                                <input type="text" id="staff-profile-address" name="address" required>
                                <button type="button" class="edit-btn" data-target="staff-profile-address">Change</button>
                            </div>
                        </div>
        
                        <button type="submit" class="submit-btn" id="save-staff-profile-btn">Save Changes</button>
                    </form>
                    <div id="staff-profile-message-area" class="message-area"></div>
        
                    <hr class="form-divider">
                    
                    <!-- Wrap the button for better centering control -->
                    <div class="button-wrapper">
                        <button type="button" class="secondary-btn" id="open-password-modal-btn">
                            <i class="fas fa-key"></i> Change Password
                        </button>
                    </div>
                </div>
                <!-- END: New profile container -->
            </section>
        </main>
    </div>

    <!-- ============================================= -->
    <!-- == Patient Record Modal == -->
    <!-- ============================================= -->
    <div class="modal" id="patient-record-modal">
       <div class="modal-content large">
            <div class="modal-header">
                <h2 id="patient-modal-title">Patient Record</h2>
                <span class="close-modal">×</span>
            </div>
            <div class="modal-body">
                <!-- Patient's Personal Info Display -->
                <div class="patient-info-header">
                    <h3 id="modal-patient-name">Patient Name</h3>
                    <p><strong>Email:</strong> <span id="modal-patient-email"></span></p>
                    <p><strong>Phone:</strong> <span id="modal-patient-phone"></span></p>
                    <p><strong>Address:</strong> <span id="modal-patient-address"></span></p>
                </div>
    
                <hr>
    
                <!-- Add New Consultation Form -->
                <h4>Add New Consultation Note</h4>
                <form id="consultation-form">
                    <input type="hidden" id="patient-record-id">
                    <div class="form-row">
                        <div class="custom-select-wrapper">
                            <select id="consult-doctor" required>
                                <option value="">Loading doctors...</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                            <label for="consult-complaint">Complaint*</label>
                            <input type="text" id="consult-complaint" required>
                        </div>
                     <div class="form-group">
                        <label for="consult-diagnosis">Diagnosis*</label>
                        <input type="text" id="consult-diagnosis" required>
                    </div>
                    <div class="form-group">
                        <label for="consult-treatment">Treatment Plan</label>
                        <textarea id="consult-treatment" rows="2"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="save-btn">Add Note</button>
                    </div>
                </form>
                
                <hr>
    
                <!-- Consultation History Display -->
                <h4>Consultation History</h4>
                <div class="consultation-history-list" id="consultation-history-list">
                    <!-- History items will be rendered here by JS -->
                    <p>No consultation history found.</p>
                </div>

                <div class="pagination-controls" id="consultation-pagination">
                    <!-- Pagination buttons will be rendered here by JS -->
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="financial-record-modal">
       <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Financial Record</h2>
                <span class="close-modal">×</span>
            </div>
            <div class="modal-body">
                <form id="financial-record-form">
                    <div class="form-group">
                        <label for="fr-item-name">Item Name*</label>
                        <input type="text" id="fr-item-name" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fr-quantity">Quantity*</label>
                            <input type="number" id="fr-quantity" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="fr-price">Price (per item)*</label>
                            <input type="number" id="fr-price" min="0" step="0.01" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="fr-purchase-date">Purchase Date*</label>
                        <!-- START: Improved Date Input -->
                        <div class="input-with-icon">
                            <input type="text" id="fr-purchase-date" placeholder="Click to select a date..." required>
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <!-- END: Improved Date Input -->
                    </div>
                     <div class="form-group">
                        <label for="fr-description">Description (Optional)</label>
                        <textarea id="fr-description" rows="2"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-btn">Cancel</button>
                        <button type="submit" class="save-btn">Save Record</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/index.js"></script>
    <password-modal></password-modal>
    <script src="/src/components/PasswordModal.js" type="module" defer></script>
    <script src="/src/pages/staff.js" defer></script>
</body>
</html>